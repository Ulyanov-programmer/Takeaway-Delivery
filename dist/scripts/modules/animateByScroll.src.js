import{elementsIsExist as l}from"./general.js";import"../scroll-timeline.js";const r=class{constructor(t,...e){if(r.repeatingAnimations=t.repeatingAnimations,e.length<=0){console.error("[AnimateByScroll] No one AnimationGroup or AnimationTimeline have been created.");return}t.activeAnimationClass&&(r.activeAnimationClass=t.activeAnimationClass)}};let i=r;i.repeatingAnimations=!1,i.activeAnimationClass="active";export{i as default};export class AnimationGroup{constructor(t,...e){l(t.selectors)==!1&&console.log("[AnimationGroup] Element is not exist!"),this.htmlElements=document.querySelectorAll(t.selectors);for(let n of this.htmlElements)n.setAttribute("data-timeout",t.timeoutBeforeStart.toString()),n.setAttribute("data-view-start-coeff",t.animateStartCoeff.toString());this.defTimeoutBeforeStart=t.timeoutBeforeStart,this.defAnimStartCoeffs=t.animateStartCoeff,this.mediaQueries=e,this.setMediaProperties(),this.createIntersectionObserver(),window.addEventListener("resize",()=>{this.setMediaProperties()},!1)}setMediaProperties(){if(!(this.mediaQueries.length<=0))for(let t of this.mediaQueries)if(window.outerWidth<=t.activationWidth)for(let e of this.htmlElements)e.setAttribute("data-timeout",t.timeoutBeforeStart.toString()),e.setAttribute("data-view-start-coeff",t.defAnimStartCoeffs.toString());else for(let e of this.htmlElements)e.setAttribute("data-timeout",this.defTimeoutBeforeStart.toString()),e.setAttribute("data-view-start-coeff",this.defAnimStartCoeffs.toString())}createIntersectionObserver(){let t={threshold:this.defAnimStartCoeffs},e=function(o){for(let s of o){let a=s.target;s.isIntersecting&&!a.classList.contains(i.activeAnimationClass)?(setTimeout(()=>{a.classList.add(i.activeAnimationClass)},parseInt(a.dataset.timeout)),i.repeatingAnimations==!1&&n.unobserve(s.target)):s.isIntersecting==!1&&i.repeatingAnimations&&a.classList.remove(i.activeAnimationClass)}};const n=new IntersectionObserver(e,t);for(let o of this.htmlElements)n.observe(o)}}export class AnimationMediaQuery{constructor(t){this.activationWidth=t.activationWidth,this.defAnimStartCoeffs=t.defAnimStartCoeffs,this.timeoutBeforeStart=t.timeoutBeforeStart}}export class AnimationTimeline{constructor(t){l(t.selectors)==!1&&console.log("[AnimationTimeline] No one element is exist!"),this.animatedElements=document.querySelectorAll(t.selectors),this.animatedProperties=t.animatedProperties,this.animateSettings=t.animateSettings,this.setDefaultanimateSettingsIfNull(t.animateSettings);for(let e of this.animatedElements)e.animate(this.animatedProperties,this.animateSettings)}setDefaultanimateSettingsIfNull(t){t.fill||(t.fill="forwards")}}
